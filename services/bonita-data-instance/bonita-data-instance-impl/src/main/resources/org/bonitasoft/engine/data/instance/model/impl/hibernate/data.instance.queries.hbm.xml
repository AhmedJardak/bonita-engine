<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping auto-import="false">

	<query name="getDataInstanceByIds">
		SELECT dataInstance
		FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
		WHERE dataInstance.id IN (:ids)
		ORDER BY dataInstance.id
	</query>

	<query name="getDataInstancesByNameAndContainer">
		SELECT dataInstance
		FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
		WHERE dataInstance.name = :name
		AND dataInstance.containerId = :containerId
		AND dataInstance.containerType = :containerType
	</query>

	<query name="getDataInstancesByContainer">
		SELECT dataInstance
		FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
		WHERE dataInstance.containerId = :containerId
		AND dataInstance.containerType = :containerType
	</query>


	<query name="getNumberOfDataInstancesForContainer">
		SELECT count(dataInstance)
        FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
        WHERE dataInstance.containerId = :containerId
        AND dataInstance.containerType = :containerType
	</query>

	<query name="getDataInstancesOfContainers">
		SELECT dataInstance
		FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
		WHERE
		dataInstance.containerType = 'ACTIVITY_INSTANCE' AND dataInstance.containerId in(:activityInstanceContainerIds)
		OR
		dataInstance.containerType = 'PROCESS_INSTANCE' AND dataInstance.containerId in(:processInstanceContainerIds)
		OR
		dataInstance.containerType = 'MESSAGE_INSTANCE' AND dataInstance.containerId in(:messageInstanceContainerIds)
	</query>

	<query name="getDataInstanceWithNameOfContainers">
		SELECT dataInstance
		FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
		WHERE
		dataInstance.name = :dataName
		AND
		(
		dataInstance.containerType = 'ACTIVITY_INSTANCE' AND dataInstance.containerId in(:activityInstanceContainerIds)
		OR
		dataInstance.containerType = 'PROCESS_INSTANCE' AND dataInstance.containerId in(:processInstanceContainerIds)
		OR
		dataInstance.containerType = 'MESSAGE_INSTANCE' AND dataInstance.containerId in(:messageInstanceContainerIds)
		)
	</query>

	<query name="getDataInstanceWithNamesOfContainers">
		SELECT dataInstance
		FROM org.bonitasoft.engine.data.instance.model.impl.SDataInstanceImpl AS dataInstance
		WHERE
		dataInstance.name in (:dataNames)
		AND
		(
		dataInstance.containerType = 'ACTIVITY_INSTANCE' AND dataInstance.containerId in(:activityInstanceContainerIds)
		OR
		dataInstance.containerType = 'PROCESS_INSTANCE' AND dataInstance.containerId in(:processInstanceContainerIds)
		OR
		dataInstance.containerType = 'MESSAGE_INSTANCE' AND dataInstance.containerId in(:messageInstanceContainerIds)
		)
	</query>



	
</hibernate-mapping>
