<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
    </bean>

    <bean id="carolJNDI" class="org.bonitasoft.engine.local.CarolJNDISetup" scope="singleton" init-method="init" destroy-method="clean">
        <constructor-arg name="jndiTemplate" ref="jndiTemplate" />
        <constructor-arg name="jndiMapping" ref="jndiEnvproperties"/>
        <constructor-arg name="port" value="${jndi.carol.port:1099}"/>
    </bean>

    <bean id="jndiEnvproperties" class="org.springframework.beans.factory.config.MapFactoryBean">
        <property name="targetMapClass" value="java.util.LinkedHashMap" />
        <property name="sourceMap">
            <map>
                <entry key="${database.journal.datasource.name}" value-ref="bonitaDS" />
                <entry key="${database.sequence.manager.datasource.name}" value-ref="bonitaSequenceManagerDS" />
            </map>
      </property>
    </bean>


    <bean id="bonitaDS" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${database.journal.connection.driver_class}" />
        <property name="jdbcUrl" value="${database.journal.connection.url}" />
        <property name="user" value="${database.journal.connection.username}" />
        <property name="password" value="${database.journal.connection.password}" />

        <!--property name="acquireIncrement" value="toBeDefined" /--><!-- default:3 -->
        <!--property name="acquireRetryAttempts" value="toBeDefined" /--><!-- default:30 -->
        <property name="acquireRetryDelay" value="50" /><!-- default:1000 -->
        <!--property name="autoCommitOnClose" value="toBeDefined" /--><!-- default:false -->
        <!--property name="automaticTestTable" value="toBeDefined" /--><!-- default:null -->
        <!--property name="breakAfterAcquireFailure" value="toBeDefined" /--><!-- default:false -->
        <!--property name="checkoutTimeout" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="connectionCustomizerClassName" value="toBeDefined" /--><!-- default:null -->
        <!--property name="connectionTesterClassName" value="toBeDefined" /--><!-- com.mchange.v2.c3p0.impl.DefaultConnectionTester-->
        <!--property name="dataSourceName" value="toBeDefined" /--><!-- default:if configured with a named config, the config name, otherwise the pool's "identity token" -->
        <!--property name="debugUnreturnedConnectionStackTraces" value="toBeDefined" /--><!-- default:false -->
        <!--property name="forceIgnoreUnresolvedTransactions" value="toBeDefined" /--><!-- default:false -->
        <property name="idleConnectionTestPeriod" value="300" /><!-- default:0 -->
        <!--property name="initialPoolSize" value="toBeDefined" /--><!-- default:3 -->
        <!--property name="maxAdministrativeTaskTime" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="maxConnectionAge" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="maxIdleTime" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="maxIdleTimeExcessConnections" value="toBeDefined" /--><!-- default:0 -->
        <property name="maxPoolSize" value="50" /><!-- default:15 -->
        <!--property name="maxStatements" value="toBeDefined" /--><!-- default:0 -->
        <property name="maxStatementsPerConnection" value="500" /><!-- default:0 -->
        <property name="minPoolSize" value="20" /><!-- default:3 -->
        <property name="numHelperThreads" value="20" /><!-- default:3 -->
        <!--property name="overrideDefaultPassword" value="toBeDefined" /--><!-- default:null -->
        <!--property name="overrideDefaultUser" value="toBeDefined" /--><!-- default:null -->
        <!--property name="preferredTestQuery" value="toBeDefined" /--><!-- default:null -->
        <!--property name="propertyCycle" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="statementCacheNumDeferredCloseThreads" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="testConnectionOnCheckin" value="toBeDefined" /--><!-- default:false -->
        <!--property name="testConnectionOnCheckout" value="toBeDefined" /--><!-- default:false -->
        <!--property name="unreturnedConnectionTimeout" value="toBeDefined" /--><!-- default:0 -->
    </bean>

    <bean id="bonitaSequenceManagerDS" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${database.journal.connection.driver_class}" />
        <property name="jdbcUrl" value="${database.journal.connection.url}" />
        <property name="user" value="${database.journal.connection.username}" />
        <property name="password" value="${database.journal.connection.password}" />

        <!--property name="acquireIncrement" value="toBeDefined" /--><!-- default:3 -->
        <!--property name="acquireRetryAttempts" value="toBeDefined" /--><!-- default:30 -->
        <property name="acquireRetryDelay" value="50" /><!-- default:1000 -->
        <!--property name="autoCommitOnClose" value="toBeDefined" /--><!-- default:false -->
        <!--property name="automaticTestTable" value="toBeDefined" /--><!-- default:null -->
        <!--property name="breakAfterAcquireFailure" value="toBeDefined" /--><!-- default:false -->
        <!--property name="checkoutTimeout" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="connectionCustomizerClassName" value="toBeDefined" /--><!-- default:null -->
        <!--property name="connectionTesterClassName" value="toBeDefined" /--><!-- com.mchange.v2.c3p0.impl.DefaultConnectionTester-->
        <!--property name="dataSourceName" value="toBeDefined" /--><!-- default:if configured with a named config, the config name, otherwise the pool's "identity token" -->
        <!--property name="debugUnreturnedConnectionStackTraces" value="toBeDefined" /--><!-- default:false -->
        <!--property name="forceIgnoreUnresolvedTransactions" value="toBeDefined" /--><!-- default:false -->
        <property name="idleConnectionTestPeriod" value="300" /><!-- default:0 -->
        <!--property name="initialPoolSize" value="toBeDefined" /--><!-- default:3 -->
        <!--property name="maxAdministrativeTaskTime" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="maxConnectionAge" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="maxIdleTime" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="maxIdleTimeExcessConnections" value="toBeDefined" /--><!-- default:0 -->
        <property name="maxPoolSize" value="15" /><!-- default:15 -->
        <!--property name="maxStatements" value="toBeDefined" /--><!-- default:0 -->
        <property name="maxStatementsPerConnection" value="500" /><!-- default:0 -->
        <property name="minPoolSize" value="1" /><!-- default:3 -->
        <property name="numHelperThreads" value="3" /><!-- default:3 -->
        <!--property name="overrideDefaultPassword" value="toBeDefined" /--><!-- default:null -->
        <!--property name="overrideDefaultUser" value="toBeDefined" /--><!-- default:null -->
        <!--property name="preferredTestQuery" value="toBeDefined" /--><!-- default:null -->
        <!--property name="propertyCycle" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="statementCacheNumDeferredCloseThreads" value="toBeDefined" /--><!-- default:0 -->
        <!--property name="testConnectionOnCheckin" value="toBeDefined" /--><!-- default:false -->
        <!--property name="testConnectionOnCheckout" value="toBeDefined" /--><!-- default:false -->
        <!--property name="unreturnedConnectionTimeout" value="toBeDefined" /--><!-- default:0 -->
    </bean>


</beans>
