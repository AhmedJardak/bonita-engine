<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	http://www.springframework.org/schema/util 
       http://www.springframework.org/schema/util/spring-util-3.0.xsd" >

	<bean id="businessDataRepository" class="com.bonitasoft.engine.business.data.impl.JPABusinessDataRepositoryImpl">
		<constructor-arg name="dependencyService" ref="dependencyService" />
		<constructor-arg name="schemaUpdater" ref="schemaUpdater" />
		<constructor-arg name="configuration">
			<map>
				<entry key="hibernate.dialect" value="${businessdata.hibernate.dialect}" />
				<entry key="hibernate.connection.datasource" value="${businessdata.datasource.jndi.path}" />
				<entry key="hibernate.show_sql" value="false" />
				<entry key="hibernate.format_sql" value="false" />
				<entry key="hibernate.transaction.jta.platform" value="${businessdata.hibernate.transaction.jta_platform}" />
				<entry key="hibernate.validator.autoregister_listeners" value="false" />
				<entry key="hibernate.validator.apply_to_ddl" value="false" />
				<entry key="javax.persistence.validation.mode" value="NONE" />
			</map>
		</constructor-arg>
	</bean>
    
    <bean id="schemaUpdater" class="com.bonitasoft.engine.business.data.impl.SchemaUpdater">
        <constructor-arg name="loggerService" ref="technicalLoggerService" />
        <constructor-arg name="configuration">
            <map>
                <entry key="hibernate.dialect" value="${businessdata.hibernate.dialect}" />
                <entry key="hibernate.connection.datasource" value="${businessdata.notmanageddatasource.jndi.path}" />
                <entry key="hibernate.show_sql" value="true" />
                <entry key="hibernate.format_sql" value="true" />
                <entry key="hibernate.transaction.jta.platform" value="${businessdata.hibernate.transaction.jta_platform}" />
                <entry key="hibernate.validator.autoregister_listeners" value="false" />
                <entry key="hibernate.validator.apply_to_ddl" value="false" />
                <entry key="javax.persistence.validation.mode" value="NONE" />
            </map>
        </constructor-arg>
    </bean>
</beans>