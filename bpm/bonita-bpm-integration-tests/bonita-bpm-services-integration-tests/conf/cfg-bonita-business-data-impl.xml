<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<bean id="businessDataRepository"
		class="com.bonitasoft.engine.business.data.impl.JPABusinessDataRepositoryImpl">
		<constructor-arg name="businessDataModelRepository"
			ref="businessDataModelRepository" />
		<constructor-arg>
			<map>
				<entry key="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" />
				<entry key="hibernate.connection.datasource" value="java:comp/env/BusinessDataDS" />
				<entry key="hibernate.show_sql" value="false" />
				<entry key="hibernate.format_sql" value="false" />
				<entry key="hibernate.transaction.jta.platform"
					value="org.bonitasoft.engine.persistence.JNDIBitronixJtaPlatform" />
				<entry key="hibernate.validator.autoregister_listeners" value="false" />
				<entry key="hibernate.validator.apply_to_ddl" value="false" />
				<entry key="javax.persistence.validation.mode" value="NONE" />
			</map>
		</constructor-arg>
	</bean>

	<bean id="businessDataModelRepository"
		class="com.bonitasoft.engine.business.data.impl.BusinessDataModelRepositoryImpl">
		<constructor-arg name="dependencyService" ref="dependencyService" />
		<constructor-arg name="schemaManager" ref="schemaManager" />
		<constructor-arg name="compilationPath">
			<value>${bonita.home}/server/platform/data-management/compilation-dependencies
			</value>
		</constructor-arg>
		<constructor-arg name="clientStoragePath">
			<value>${bonita.home}/server/platform/data-management/client
			</value>
		</constructor-arg>
	</bean>

	<bean id="schemaManager" class="com.bonitasoft.engine.business.data.impl.SchemaManager">
		<constructor-arg name="loggerService" ref="technicalLoggerService" />
		<constructor-arg name="configuration">
			<map>
				<entry key="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" />
				<entry key="hibernate.connection.datasource" value="java:comp/env/NotManagedBizDataDS" />
				<entry key="hibernate.show_sql" value="true" />
				<entry key="hibernate.format_sql" value="true" />
				<entry key="hibernate.transaction.jta.platform"
					value="org.bonitasoft.engine.persistence.JNDIBitronixJtaPlatform" />
				<entry key="hibernate.validator.autoregister_listeners" value="false" />
				<entry key="hibernate.validator.apply_to_ddl" value="false" />
				<entry key="javax.persistence.validation.mode" value="NONE" />
			</map>
		</constructor-arg>
	</bean>
</beans>
